# Early Detection of Microbursts

This project aims to address a critical networking problem: packet loss caused by a specific type of microburst known as a "single bursty flow." A microburst is a large-scale, short-duration traffic spike that can overwhelm network switches, leading to buffer overflow and performance degradation. Our solution leverages the power of eBPF to detect these events in real time and preemptively notify downstream switches, allowing them to prepare for the incoming traffic surge.

---

## The Problem: Single Bursty Flows

A single bursty flow is a microburst generated by a sudden, short-term spike in the data rate of a single network flow. While modern network switches are capable of forwarding traffic at line rate, packet loss can still occur due to a mismatch between the traffic pattern and the switch's internal architecture.

Switches typically rely on a high-speed, limited-capacity hardware forwarding table (TCAM) for line-rate forwarding. Rules for less active flows are stored in a slower, larger software table (DRAM). When a single flow experiences a microburst, its forwarding rule might reside in the software table. The switch must then move this rule into the hardware table, a process that takes time. During this transition, packets are buffered, and with the extremely high bandwidth of modern links, the buffer can quickly fill up, resulting in significant packet loss.

---

## Our Solution

We propose a novel eBPF-based solution to this problem. Our eBPF program is designed to monitor network traffic and detect when a single flow is experiencing a rapid increase in packet rateâ€”a telltale sign of an impending microburst.

Upon detecting a potential microburst, the eBPF program will:
1.  Identify the flow that is experiencing the burst.
2.  Create a high-priority notification packet containing the necessary forwarding information (e.g., MAC address translations).
3.  Send this notification packet to the next switch in the path.

This proactive approach allows the downstream switch to pre-load the required forwarding rules into its hardware table **before** the microburst's main traffic arrives. This prevents the buffer overflow that would otherwise occur, ensuring that the bursty traffic can be handled at line rate without packet loss.

---

## Project Phases

This project is being developed in a phased approach to manage complexity and ensure each component is robust and highly performant.

### Phase 1: High-Performance Packet Counting

The goal of this phase was to develop a high-performance eBPF program capable of accurately counting packets for each unique network flow. This is the foundational component for detecting microbursts, as we need a precise way to measure packet rates.

* **Version 0.1-0.5:** We iterated through several versions, starting with a basic eBPF program that printed debug messages and gradually adding functionality to track packet counts per flow.
* **Version 1.0:** A major refactor was performed to move from kernel-based debug printing to a more scalable user-space monitoring architecture. The eBPF program now populates a BPF map with flow data, which a separate user-space program reads.
* **Version 1.1:** The user-space monitoring application was enhanced to provide real-time, continuously updated output, improving the user experience and making it easier to visualize live traffic.

### Phase 2: (To be filled)

An empty section is a great way to show a project is ongoing. You can fill this in when you get to that phase.
